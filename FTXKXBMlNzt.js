if (self.CavalryLogger) { CavalryLogger.start_js(["pfKJI"]); }

__d("InfiniteScrollArea.react",["React","ScrollableArea.react"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$InfiniteScrollArea1=function(){if(this.props.onEndReached&&this.refs.area.getArea()&&this.refs.area.getArea().distanceToBottom()<this.props.distanceToEnd)this.props.onEndReached()}.bind(this),m}k.prototype.scrollIntoView=function(l,m){"use strict";return this.refs.area.getArea().scrollIntoView(l,m)};k.prototype.scrollToTop=function(l){"use strict";this.refs.area.getArea().scrollToTop(l)};k.prototype.componentDidUpdate=function(){"use strict";this.$InfiniteScrollArea1()};k.prototype.render=function(){"use strict";return c("React").createElement(c("ScrollableArea.react"),babelHelpers["extends"]({onScroll:this.$InfiniteScrollArea1},this.props,{ref:"area"}),this.props.children)};k.propTypes={distanceToEnd:j.number,onEndReached:j.func};k.defaultProps={distanceToEnd:50};f.exports=k}),null);
__d("FBTilesAttributionLogo.react",["cx","React","TilesMapConfig","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){switch(this.props.mapProvider){case"HERE":return this.$FBTilesAttributionLogo1();case"OSM":return this.$FBTilesAttributionLogo2()}return null};l.prototype.$FBTilesAttributionLogo1=function(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_3d_k"),style:{backgroundImage:"url("+c("TilesMapConfig").LOGO.url+")",height:c("TilesMapConfig").LOGO.height+"px",width:c("TilesMapConfig").LOGO.width+"px"}})};l.prototype.$FBTilesAttributionLogo2=function(){return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_wuu")},"\xa9 OpenStreetMap")};function l(){i.apply(this,arguments)}l.propTypes={className:k.string,mapProvider:k.oneOf(["HERE","OSM"]).isRequired};f.exports=l}),null);
__d("FBTilesMapZoomOverlay.react",["cx","ix","fbt","Image.react","React","XUIButton.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n=c("React").createElement(c("Image.react"),{src:i("22148")}),o=c("React").createElement(c("Image.react"),{src:i("22147")});k=babelHelpers.inherits(p,c("React").PureComponent);l=k&&k.prototype;p.prototype.render=function(){var q=this.props,r=q.onZoomIn,s=q.onZoomOut,t=babelHelpers.objectWithoutProperties(q,["onZoomIn","onZoomOut"]);return c("React").createElement("div",t,c("React").createElement("div",null,c("React").createElement(c("XUIButton.react"),{disabled:r==null,image:n,label:j._("Zoom In"),labelIsHidden:true,onClick:r,type:"button"})),c("React").createElement("div",null,c("React").createElement(c("XUIButton.react"),{className:"_3d8x",disabled:s==null,image:o,label:j._("Zoom Out"),labelIsHidden:true,onClick:s,type:"button"})))};function p(){k.apply(this,arguments)}p.propTypes={onZoomIn:m.func,onZoomOut:m.func};f.exports=p}),null);
__d("TilesMapTheme",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DEFAULT:"default",CROWDSOURCING_OSM:"crowdsourcing_osm",ROAD_MASK_OSM_EDITING:"road_mask_osm_editing",LIVE_MAPS:"live_maps",INDOOR_OSM:"indoor_osm",LIVE_MAPS_MIMIC:"live_maps_mimic",MAP_DIFF:"map_diff"})}),null);
__d("XMapsProviderByViewPortController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/maps/provider_by_viewport/",{swlat:{type:"Float",required:true},swlon:{type:"Float",required:true},nelat:{type:"Float",required:true},nelon:{type:"Float",required:true},zoom:{type:"Float",required:true},v:{type:"Int"}})}),null);
__d("TilesMapUtils",["CurrentLocale","GeoCoordinates","GeoRectangle","LeafletUtils","LeafletView","TilesMapConfig","TilesMapTheme","URI","XAsyncRequest","XMapsProviderByViewPortController","leaflet"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("TilesMapConfig").OSM_RECTS_RAW.map(function(j){return c("leaflet").latLngBounds([j[2],j[1]],[j[0],j[3]])}),i={DEFAULT_VIEW:new(c("LeafletView"))({center:new(c("GeoCoordinates"))(0,0),zoom:c("TilesMapConfig").ZOOM_RANGE.MIN}),getMapProviderForAttributionByViewPort:function j(k,l,m){var n=c("XMapsProviderByViewPortController").getURIBuilder().setFloat("swlat",k.getSouth()).setFloat("swlon",k.getWest()).setFloat("nelat",k.getNorth()).setFloat("nelon",k.getEast()).setFloat("zoom",l).setInt("v",c("TilesMapConfig").VERSION).getURI();new(c("XAsyncRequest"))(n).setHandler(function(o){return m(o.payload)}).send()},getTileURLTemplate:function j(k,l){if(!k)k=c("CurrentLocale").get();return c("TilesMapConfig").TILE_URL_TEMPLATE+"&language="+k+(l&&l!==c("TilesMapTheme").DEFAULT?"&theme="+l:"")+(l===c("TilesMapTheme").LIVE_MAPS?"&lmv="+c("TilesMapConfig").LIVE_MAP_VERSION:"")},getOSMRects:function j(){return i.getOSMRectsFromRaw(c("TilesMapConfig").OSM_RECTS_RAW)},getOSMRectsFromRaw:function j(k){return k.map(function(l){return new(c("GeoRectangle"))(l[0],l[1],l[2],l[3])})},getMapProviderForAttribution:function j(k,l,m,n){if(l.height<c("TilesMapConfig").MIN_SIZE_FOR_ATTRIBUTION||l.width<c("TilesMapConfig").MIN_SIZE_FOR_ATTRIBUTION)return null;if(n!==""&&n!==c("TilesMapTheme").DEFAULT&&n!==c("TilesMapTheme").ROAD_MASK_OSM_EDITING)return"OSM";if(k.zoom<c("TilesMapConfig").OSM_ZOOM_THRESHOLD)return"HERE";return c("LeafletUtils").isViewInBounds(k,l,h,m)?"OSM":"HERE"},getMapProviderForReportButton:function j(k,l){if(l!==""&&l!==c("TilesMapTheme").DEFAULT&&l!==c("TilesMapTheme").ROAD_MASK_OSM_EDITING)return"OSM";if(k.zoom<c("TilesMapConfig").OSM_ZOOM_THRESHOLD)return"HERE";var m=c("leaflet").latLng(k.center.latitude,k.center.longitude);return h.some(function(n){return n.contains(m)})?"OSM":"HERE"},getHereReporterToolUrl:function j(k){return new(c("URI"))(c("TilesMapConfig").HERE_MAP_REPORTER_URL).addQueryData("features","road,border").addQueryData("zoomLevel",Math.floor(k.zoom)).addQueryData("lang",c("CurrentLocale").get()).addQueryData("coord",k.center.latitude+","+k.center.longitude).toString()}};f.exports=i}),null);
__d("FBTilesMap.react",["cx","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","FBTilesAttributionLogo.react","FBTilesInfoButton.react","FBTilesMapZoomOverlay.react","LeafletUtils","LeafletView","LeafletMap.react","LeafletTileLayer.react","React","TilesMapConfig","TilesMapUtils","TilesMapTheme"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l={maxZoom:c("TilesMapConfig").ZOOM_RANGE.MAX,minZoom:c("TilesMapConfig").ZOOM_RANGE.MIN};function m(s,t){if(t!=null&&t.type===c("FBOverlayElement.react"))return s?t:undefined;return s?undefined:t}var n=function n(s){return c("React").Children.map(s,m.bind(undefined,false))},o=function o(s){return c("React").Children.map(s,m.bind(undefined,true))};function p(s){return{overlays:o(s),others:n(s)}}var q=k.shape({horizontal:k.oneOf(["left","right","fit"]),vertical:k.oneOf(["top","bottom","fit"])});i=babelHelpers.inherits(r,c("React").Component);j=i&&i.prototype;function r(){__p&&__p();var s,t;for(var u=arguments.length,v=Array(u),w=0;w<u;w++)v[w]=arguments[w];return t=(s=j.constructor).call.apply(s,[this].concat(v)),this.state={size:null,attributions:[]},this.$FBTilesMap6=function(x){this.setState({size:x});if(this.props.onSizeSettled!=null)this.props.onSizeSettled(x)}.bind(this),this.$FBTilesMap7=function(){var x=this.props.view;if(x==null||this.props.onViewChange==null)return;if(x.zoom<c("TilesMapConfig").ZOOM_RANGE.MAX)this.props.onViewChange(x.setZoom(x.zoom+1))}.bind(this),this.$FBTilesMap8=function(){var x=this.props.view;if(x==null||this.props.onViewChange==null)return;if(x.zoom>c("TilesMapConfig").ZOOM_RANGE.MIN)this.props.onViewChange(x.setZoom(x.zoom-1))}.bind(this),t}r.prototype.render=function(){var s=this.props,t=s.children,u=s.className,v=s.style,w=s.defaultView,x=babelHelpers.objectWithoutProperties(s,["children","className","style","defaultView"]),y=p(t),z=y.others,A=y.overlays;if(w)throw new Error("<FBTilesMap /> cannot be used with `defaultView` prop. Please provide `view` prop and treat as a controlled component.");return c("React").createElement(c("FBOverlayContainer.react"),{className:u,style:v},c("React").createElement(c("FBOverlayBase.react"),null,this.$FBTilesMap1(z,x)),A,this.$FBTilesMap2(),this.$FBTilesMap3(),this.$FBTilesMap4())};r.prototype.componentDidMount=function(){this.$FBTilesMap5()};r.prototype.componentDidUpdate=function(){this.$FBTilesMap5()};r.prototype.$FBTilesMap5=function(){if(this.state.size===null||this.state.size===undefined||this.props.view===undefined)return;var s=c("LeafletUtils").getViewBounds(this.props.view,{width:this.state.size.x,height:this.state.size.y});if(this.props.view===undefined)return;c("TilesMapUtils").getMapProviderForAttributionByViewPort(s,this.props.view.zoom,function(t){t.sort();if(JSON.stringify(this.state.attributions)!==JSON.stringify(t))this.setState({attributions:t})}.bind(this))};r.prototype.$FBTilesMap2=function(){if(this.state.size==null)return null;return this.state.attributions.every(function(s){return s!=="here"})?null:c("React").createElement(c("FBOverlayElement.react"),this.props.attributionLogoPosition,c("React").createElement(c("FBTilesAttributionLogo.react"),{mapProvider:"HERE"}))};r.prototype.$FBTilesMap3=function(){if(!this.props.showReportButton||this.state.size==null)return null;var s=function(){return{hereReportUrl:c("TilesMapUtils").getHereReporterToolUrl(this.props.view),mapSources:this.state.attributions,mapUrl:null}}.bind(this);return c("React").createElement(c("FBOverlayElement.react"),this.props.reportButtonPosition,c("React").createElement(c("FBTilesInfoButton.react"),{className:"_1mfw",mapInfoCallback:s}))};r.prototype.$FBTilesMap1=function(s,t){var u=babelHelpers["extends"]({},t.options,{zoomControl:false});return c("React").createElement(c("LeafletMap.react"),babelHelpers["extends"]({},t,{className:"_5db7",onSizeSettled:this.$FBTilesMap6,options:u}),c("React").createElement(c("LeafletTileLayer.react"),{options:Object.assign({},this.props.tileOptions,l),urlTemplate:c("TilesMapUtils").getTileURLTemplate(null,this.props.theme)}),s)};r.prototype.$FBTilesMap4=function(){if(this.props.view==null||this.props.onViewChange==null||!this.props.showZoomControls)return null;var s=this.props.view.zoom<l.maxZoom?this.$FBTilesMap7:undefined,t=this.props.view.zoom>l.minZoom?this.$FBTilesMap8:undefined;return c("React").createElement(c("FBOverlayElement.react"),this.props.setZoomPosition,c("React").createElement(c("FBTilesMapZoomOverlay.react"),{className:"_3-8j _1yx0",onZoomIn:s,onZoomOut:t}))};r.propTypes={className:k.string,showZoomControls:k.bool,setZoomPosition:q,showReportButton:k.bool,style:k.object,theme:k.string,view:k.instanceOf(c("LeafletView")),tileOptions:k.object,reportButtonPosition:q,attributionLogoPosition:q};r.defaultProps={showReportButton:true,theme:c("TilesMapTheme").DEFAULT,setZoomPosition:{vertical:"top",horizontal:"left"},reportButtonPosition:{vertical:"bottom",horizontal:"right"},attributionLogoPosition:{vertical:"bottom",horizontal:"left"}};f.exports=r}),null);
__d("intersectArrays",["Set"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){for(var i=arguments.length,j=Array(i),k=0;k<i;k++)j[k]=arguments[k];var l=j.splice(0,1)[0]||[],m=j.map(function(n){return new(c("Set"))(n)});return l.filter(function(n){return m.every(function(o){return o.has(n)})})}f.exports=h}),null);
/**
 * License: https://www.facebook.com/legal/license/bBb8Rg0CPlQ/
 */
__d("react-0.0.0",["React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p){return p&&typeof p==="object"&&"default"in p?p["default"]:p}var i=h(c("React")),j={},k={exports:j};function l(){k.exports=i}var m=false,n=function(){if(!m){m=true;l()}return k.exports},o=function(p){switch(p){case undefined:return n()}};f.exports=o}),null);
__d("react",["react-0.0.0"],(function a(b,c,d,e,f,g){f.exports=c("react-0.0.0")()}),null);
__d("create-react-class",["react","create-react-class/factory"],(function a(b,c,d,e,f,g){"use strict";if(typeof c("react")==="undefined")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var h=new(c("react").Component)().updater;f.exports=c("create-react-class/factory")(c("react").Component,c("react").isValidElement,h)}),null);
__d("createReactClass_DEPRECATED",["create-react-class"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("create-react-class")}),null);